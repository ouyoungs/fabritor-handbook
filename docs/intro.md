---
sidebar_position: 1
---

# 前言

## fabritor 简介

**fabritor** 是一款基于 fabricjs 开发的图片设计编辑器，可以应用于海报设计、封面设计、banner 设计等等。目前已经在 Github 开源，开源地址：[https://github.com/sleepy-zone/fabritor-web](https://github.com/sleepy-zone/fabritor-web)。

![fabritor 编辑器图片](https://github.com/sleepy-zone/fabritor-web/raw/main/public/fabritor_editor.png)

项目经过多次迭代，目前已经进入稳定阶段，他几乎包含了图片设计编辑器拥有的所有特性：

**📚 文本**

内置多种开源字体；支持调整文字样式；支持多种文字特效：描边、阴影、形状文字、文字渐变、文字图片填充。

**🌄 图片**

加载本地或者远程图片；支持图片边框和圆角；支持图片裁剪；支持多种图片滤镜；

**➡️ 形状**

支持线段、箭头和多边形；多边形支持添加边框，同样支持渐变填充。支持手绘风格图形。

**✍️ 画笔**

支持自由绘制。

**💎 应用**

内置 二维码、emoji 等应用。

**👚 画布**

支持定制背景色和画布尺寸；支持画布拖拽。

**🛒 元素操作**

锁定、透明度、组合、复制粘贴、删除、图层层级、历史操作记录、页面对齐及对应的快捷键操作。

**🛠 导出**

导出到剪贴板，导出 JPG、PNG、SVG 和模板（JSON），基于 JSON 可以构建模板库。

**🤗 安全可靠**

纯浏览器端操作；操作自动保存到本地，数据不丢失。

---

手册的后面，会一一介绍这些特性，以及这些特性背后的实现逻辑。

## 为何开源 fabritor

起初只是自己手头的一个图片设计编辑器的需求，也是第一次接触这个领域。在调研一番之后，我才发现，这个领域实在是太卷了。

有众多的商业项目在做这个事情，比如 [Canva](https://www.canva.cn/)，目前我认为最好的商业项目，比如[美图秀秀](https://www.x-design.com/)。同时也有很多开源项目，都获得了不错的的关注度，但质量参差不齐。

**在这么卷的情况下，为何我依然选择了开源？**

商业项目自不必说，虽然有很多优势：项目完整、设计精美的模板库以及众多的字体、图片版权，但毕竟是商业项目，你无法基于他的代码开始一个新的项目。（另外商业项目的有些行为真的很迷，满是水印，但下载图片也要会员。）

而自建图片设计编辑器确实也不是一件简单的事情。当我想选择一个开源项目开始的时候，我发现开源项目，最大的问题就是不够**精致**。说到精致，不得不再说一下 Canva。如果你用过 Canva，不知道你有没有发现他的文字设置，当你给一段文字设置为不同颜色时，他的工具栏处的颜色也会变为多种颜色，而当你的文字设置为白色时，工具颜色设置处会变为彩色。这只是一个小点，但做的如此精致。

<img src="img/docs/intro/canva_text_color.jpg" width="40" />

<img src="img/docs/intro/canva_text.jpg" width="400" />

说回现在的开源项目，举个例子：箭头。fabric.js 内是没有内置箭头这个类的，需要自定义去实现，然后你就会发现，当箭头更改线宽时，只有线段的宽度更改了，三角箭头并没有放大。比如圆角矩形，在横向或者纵向拉伸时，圆角都变形了。

<img src="img/docs/intro/error_shape.jpg" width="600" />

所以，我坚定的选择了开源，旨在帮助开发者快速构建一个属于自己的好用且精致的图片编辑器。

## 为何会有这本手册

fabritor 开源之后，收获了一些关注，也收到了一些开发者的疑问，我意识到需要写一本小册子来帮助大家了解 fabritor，通过这本手册了解 fabritor 的技术栈以及各个特性的实现，帮助大家更好的自定义自己的图片编辑器，也期望大家能够参与到这个项目中来，项目还是有很大的优化空间。

手册的另一个目的就是帮助大家了解 fabric.js。在我使用 fabric.js 开发之初，也是希望有一份中文文档的，但很可惜，搜到的内容要么浮于表面，要么直接搬运官网。所以这本手册在讲解 fabritor 过程中，也会聊 fabric.js 相关的内容，在项目中学习，应该是个不错的过程。

所以我给手册起了另外一个名字：跟着 fabritor 学习 fabric.js。

## fabric.js 简介

[fabric.js](http://fabricjs.com/) 是一个十分老牌的 2d Canvas 库，项目在 2010 年左右启动，已经有十多年的时间了，甚至比我工作的时间都长的多，翻翻源码也是很老派的写法，但从他的更新历史、Star 数量来看，不妨碍他是一个十分优秀的项目。

不过难能可贵的是项目还在积极更新，现在的稳定版本是 5.x，本系列也会基于这个版本编写。官方正在积极开发 [6.0 版本](https://github.com/fabricjs/fabric.js/issues/8299)。不过从给出的 issue 上看，能力上基本保持一致，所以学习 5.x 版本切换到 6.x 也不是什么难得事情。

另外，有一个 2d Canvas 库：[Konva](https://konvajs.org/)，会经常和 fabric.js 一起讨论，Konva 更新一点，一开始就使用 TS 开发，代码分层也更清晰。但是 2d Canvas 库的内容都不是差很多，同样，学会了 fabric.js 切换到 Konva 也不是什么难事。